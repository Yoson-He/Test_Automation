{% extends "base.html" %}
{% block mainbody %}
    <form class="layui-form layui-form-pane" action="">
        <div class="api-box-top">
            <a  class="layui-btn layui-btn-small layui-btn-primary" href="{% url 'api_manage' %}"><i class="layui-icon">&#xe603;</i>返回列表</a>
            <button class="layui-btn layui-btn-small layui-btn-normal">继续添加</button>
            <button class="layui-btn layui-btn-small layui-btn-normal">保存</button>
        </div>
        <div class="form-div">
            <div class="api-basic">
                <div class="layui-form-item api-form-item">
                    <label class="layui-form-label api-form-label">分组</label>
                    <div class="api-form-inline layui-input-inline" style="width: 150px">
                        <select id="project_select" name="project_id" required lay-verify="required" ></select>
                    </div>
                    <div class="layui-input-inline api-form-inline">
                        <select id="project_select" name="group_id"  lay-verify="required"></select>
                    </div>
                </div>
                <div class="layui-form-item api-form-item">
                    <label class="layui-form-label api-form-label">状态</label>
                    <div class="layui-input-inline api-form-inline" style="width: 100px">
                        <select name="state">
                            <option value="0">启用</option>
                            <option value="1">禁用</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item api-form-item">
                    <label class="layui-form-label api-form-label">URI</label>
                    <div class="layui-input-inline api-form-inline" style="width: 100px">
                        <select name="protocol">
                            <option value="0">HTTP</option>
                            <option value="1">HTTPS</option>
                        </select>
                    </div>
                    <div class="layui-input-inline api-form-inline" style="width: 100px">
                        <select name="method">
                            <option value="0">POST</option>
                            <option value="1">GET</option>
                        </select>
                    </div>
                    <div class="layui-input-inline api-form-inline" style="width: calc(100% - 307px)">
                        <input type="text" name="path" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input" >
                    </div>
                </div>
                <div class="layui-form-item api-form-item">
                    <label class="layui-form-label api-form-label">名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="api_name" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
                    </div>
                </div>
            </div>
            <div class="api-param">
                <div class="api-request-param">
                    <div class="layui-tab layui-tab-card">
                        <ul class="layui-tab-title">
                            <li class="layui-this">请求头</li>
                            <li>URI参数</li>
                            <li>Qurey参数</li>
                            <li>Body参数</li>
                        </ul>
                        <div class="layui-tab-content">
                            <div class="layui-tab-item layui-show" >
                                <a class="layui-btn layui-btn-small layui-btn-normal">导入头部</a>
                                <table class="api-headers-table">
                                    <thead>
                                    <tr>
                                        <td style="width: 210px">Key</td>
                                        <td >Value</td>
                                        <td style="width: 200px">Operation</td>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>
                                            <select name="header_key" lay-search>
                                                <option value=""></option>
                                                <option value="Accept">Accept</option>
                                                <option value="Accept-Charset">Accept-Charset</option>
                                                <option value="Accept-Encoding">Accept-Encoding</option>
                                                <option value="Accept-Language">Accept-Language</option>
                                                <option value="Accept-Ranges">Accept-Ranges</option>
                                                <option value="Authorization">Authorization</option>
                                                <option value="Cache-Control">Cache-Control</option>
                                                <option value="Connection">Connection</option>
                                                <option value="Cookie">Cookie</option>
                                                <option value="Content-Length">Content-Length</option>
                                                <option value="Content-Type">Content-Type</option>
                                                <option value="Content-MD5">Content-MD5</option>
                                                <option value="Date">Date</option>
                                                <option value="Expect">Expect</option>
                                                <option value="From">From</option>
                                                <option value="Host">Host</option>
                                                <option value="If-Match">If-Match</option>
                                                <option value="If-Modified-Since">If-Modified-Since</option>
                                                <option value="If-None-Match">If-None-Match</option>
                                                <option value="If-Range">If-Range</option>
                                                <option value="If-Unmodified-Since">If-Unmodified-Since</option>
                                                <option value="Max-Forwards">Max-Forwards</option>
                                                <option value="Origin">Origin</option>
                                                <option value="Pragma">Pragma</option>
                                                <option value="Proxy-Authorization">Proxy-Authorization</option>
                                                <option value="Range">Range</option>
                                                <option value="Referer">Referer</option>
                                                <option value="TE">TE</option>
                                                <option value="Upgrade">Upgrade</option>
                                                <option value="User-Agent">User-Agent</option>
                                                <option value="Via">Via</option>
                                                <option value="Warning">Warning</option>
                                            </select>
                                        </td>
                                        <td><input type="text" name="header_value" placeholder="" autocomplete="off" class="layui-input"></td>
                                        <td> </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="layui-tab-item">
                                <table class="api-uri-table">
                                    <thead>
                                    <tr>
                                        <td style="width: 210px">Key</td>
                                        <td >Value</td>
                                        <td style="width: 200px">Operation</td>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td><input type="text" name="uri_key" placeholder="" autocomplete="off" class="layui-input"></td>
                                        <td><input type="text" name="uri_value" placeholder="" autocomplete="off" class="layui-input"></td>
                                        <td> </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="layui-tab-item">
                                <table class="api-query-table">
                                    <thead>
                                    <tr>
                                        <td style="width: 210px">Key</td>
                                        <td >Value</td>
                                        <td style="width: 200px">Operation</td>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td><input type="text" name="query_key" placeholder="" autocomplete="off" class="layui-input"></td>
                                        <td><input type="text" name="query_value" placeholder="" autocomplete="off" class="layui-input"></td>
                                        <td> </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="layui-tab-item">4</div>
                        </div>
                    </div>
                </div>
                <div class="api-response-param">
                    <div class="layui-tab layui-tab-card">
                        <ul class="layui-tab-title">
                            <li class="layui-this">返回参数</li>
                        </ul>
                        <div class="layui-tab-content">
                            <div class="layui-tab-item layui-show">2</div>
                        </div>
                    </div>
                    <div class="api-response-sample">
                        <div class="layui-tab layui-tab-card">
                            <ul class="layui-tab-title">
                                <li class="layui-this">成功示例</li>
                                <li>失败示例</li>
                            </ul>
                            <div class="layui-tab-content">
                                <div class="layui-tab-item layui-show">2</div>
                                <div class="layui-tab-item">3</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <script>
        layui.use(['form','element','table'],function(){
            var table = layui.table,form = layui.form,element = layui.element;

            $("table.api-headers-table").on("click","input[name='header_value']",function(){
                if ($(this).attr("class") != "layui-input clicked"){
                    var txt = "<tr>" +
                        "<td><select name=\"header_key\" lay-search>" +
                        "<option value=\"\"></option>" +
                        "<option value=\"Accept\">Accept</option>\n" +
                        "<option value=\"Accept-Charset\">Accept-Charset</option>\n" +
                        " <option value=\"Accept-Encoding\">Accept-Encoding</option>\n" +
                        "<option value=\"Accept-Language\">Accept-Language</option>\n" +
                        "<option value=\"Accept-Ranges\">Accept-Ranges</option>\n" +
                        "<option value=\"Authorization\">Authorization</option>\n" +
                        "<option value=\"Cache-Control\">Cache-Control</option>\n" +
                        "<option value=\"Connection\">Connection</option>\n" +
                        "<option value=\"Cookie\">Cookie</option>\n" +
                        "<option value=\"Content-Length\">Content-Length</option>\n" +
                        "<option value=\"Content-Type\">Content-Type</option>\n" +
                        "<option value=\"Content-MD5\">Content-MD5</option>\n" +
                        "<option value=\"Date\">Date</option>\n" +
                        "<option value=\"Expect\">Expect</option>\n" +
                        "<option value=\"From\">From</option>\n" +
                        "<option value=\"Host\">Host</option>\n" +
                        "<option value=\"If-Match\">If-Match</option>\n" +
                        "<option value=\"If-Modified-Since\">If-Modified-Since</option>\n" +
                        "<option value=\"If-None-Match\">If-None-Match</option>\n" +
                        "<option value=\"If-Range\">If-Range</option>\n" +
                        "<option value=\"If-Unmodified-Since\">If-Unmodified-Since</option>\n" +
                        "<option value=\"Max-Forwards\">Max-Forwards</option>\n" +
                        "<option value=\"Origin\">Origin</option>\n" +
                        "<option value=\"Pragma\">Pragma</option>\n" +
                        "<option value=\"Proxy-Authorization\">Proxy-Authorization</option>\n" +
                        "<option value=\"Range\">Range</option>\n" +
                        "<option value=\"Referer\">Referer</option>\n" +
                        "<option value=\"TE\">TE</option>\n" +
                        "<option value=\"Upgrade\">Upgrade</option>\n" +
                        "<option value=\"User-Agent\">User-Agent</option>\n" +
                        "<option value=\"Via\">Via</option>\n" +
                        "<option value=\"Warning\">Warning</option>" +
                        "</select></td>" +
                        "<td><input type=\"text\" name=\"header_value\" placeholder=\"\" autocomplete=\"off\" class=\"layui-input\" ></td>" +
                        "<td></td></tr>";
                    $("table.api-headers-table>tbody").append(txt);
                    txt = "<a href=\"#\"><i class=\"layui-icon\" style=\"font-size: 20px;\">&#xe640;</i></a>";
                    $(this).parent().next().append(txt);
                    $(this).addClass("clicked");
                    form.render();
                }
            });

            $("table.api-uri-table").on("click","input[name='uri_value']",function(){
                if ($(this).attr("class") != "layui-input clicked"){
                    var txt = "<tr>" +
                        "<td><input type=\"text\" name=\"uri_key\" placeholder=\"\" autocomplete=\"off\" class=\"layui-input\"></td>"+
                        "<td><input type=\"text\" name=\"uri_value\" placeholder=\"\" autocomplete=\"off\" class=\"layui-input\"></td>" +
                        "<td></td></tr>";
                    $("table.api-uri-table>tbody").append(txt);
                    txt = "<a href=\"#\"><i class=\"layui-icon\" style=\"font-size: 20px;\">&#xe640;</i></a>";
                    $(this).parent().next().append(txt);
                    $(this).addClass("clicked");
                    form.render();
                }
            });

            $("table.api-query-table").on("click","input[name='query_value']",function(){
                if ($(this).attr("class") != "layui-input clicked"){
                    var txt = "<tr>" +
                        "<td><input type=\"text\" name=\"query_key\" placeholder=\"\" autocomplete=\"off\" class=\"layui-input\"></td>"+
                        "<td><input type=\"text\" name=\"query_value\" placeholder=\"\" autocomplete=\"off\" class=\"layui-input\"></td>" +
                        "<td></td></tr>";
                    $("table.api-query-table>tbody").append(txt);
                    txt = "<a href=\"#\"><i class=\"layui-icon\" style=\"font-size: 20px;\">&#xe640;</i></a>";
                    $(this).parent().next().append(txt);
                    $(this).addClass("clicked");
                    form.render();
                }
            });

        });
    </script>
{% endblock %}